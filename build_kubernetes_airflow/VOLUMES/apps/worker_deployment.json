{
  "apiVersion": "apps/v1",
  "kind": "Deployment",
  "metadata":{
    "name": "spark-worker",
    "namespace": "spark",
    "labels":{
      "app": "spark-worker"
    }
  },
  "spec": {
    "replicas" : 1,
    "selector": {
      "matchLabels" : {
        "app": "spark-worker"
      }
    },
    "template" : {
      "metadata" : {
        "labels" : {
          "app": "spark-worker"
        }
      },
      "spec":{
        "containers":[
          {
            "name": "spark-worker",
            "image": "sanmuk21/sdh-spark-kubernetes:1.0.2.4",
            "resources": {
              "limits": {
                "cpu": "1000m",
                "memory": "1500Mi"
              },
              "requests": {
                "cpu": "1000m",
                "memory": "1500Mi"
              }
            },
            "volumeMounts": [
              {
                "name": "spark-history-volume",
                "mountPath": "/spark-history"
              }
            ],  
            "env": [
              {
                "name": "MASTER_SPARK",
                "value": "spark-master"
              },
              {
                "name": "MASTER_SPARK_PORT",
                "value": "7700"
              }
            ],
            "command": [ "/sdh/spark2/sbin/start-worker-noautostop" ]
          }
        ],
        "volumes": [
          {
            "name": "spark-history-volume",
            "persistentVolumeClaim": {
              "claimName": "spark-history-volume-claim"
            }
          }
        ]        
      }
    }
  }
}
